##
## EPITECH PROJECT, 2017
## Makefile
## File description:
## Makefile generated by crigen, for criterion
##

.SUFFIXES:	.c.o

CC=			gcc

CFLAGS=		-Wall -Wextra -Werror --coverage -I../include -I./include
LDFLAGS=	-L../lib -lcriterion -lgcov -lmy_fgets -lmy

NAME=		units

SRC_DIR=	$(realpath ./../srcs)
SRC=		$(SRC_DIR)/main.c                       \
			$(SRC_DIR)/main.c                           \
			$(SRC_DIR)/fil2.c                           \
			$(SRC_DIR)/file.c                           \

SRC_UT_DIR=	$(realpath .)

GCDA_FILES=	$(SRC:.c=.gcda) $(SRC_UT:.c=.gcda)
GCNO_FILES=	$(SRC:.c=.gcno) $(SRC_UT:.c=.gcno)
OBJ=		$(SRC:.c=.o) $(SRC_UT:.c=.o)

all:		$(NAME)

run:
		@./$(NAME)

$(NAME):	$(OBJ)
		make -C ../lib/my_fgets re
		make -C ../lib/my re
		$(CC) $(CFLAGS) -o $(NAME) $(OBJ) $(LDFLAGS)

.c.o:
	$(CC) $(CFLAGS) -o $@ $<

clean:
		@rm -rf $(OBJ) $(GCDA_FILES) $(GCNO_FILES)
		make -C ../lib/my_fgets clean
		make -C ../lib/my clean

fclean:		clean
		make -C ../lib/my_fgets fclean
		make -C ../lib/my fclean
		@rm -rf $(NAME)

re:	fclean all

.PHONY:	clean fclean re
